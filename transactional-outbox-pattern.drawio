<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36" version="29.0.3">
  <diagram name="Outbox Pattern" id="outbox-pattern-diagram">
    <mxGraphModel dx="826" dy="455" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="&lt;b&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;Transactional Outbox Pattern&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="100" y="30" width="650" height="40" as="geometry" />
        </mxCell>
        <mxCell id="subtitle" value="Garantia de consistência entre banco de dados e Kafka usando tabela de outbox" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="125" y="70" width="600" height="25" as="geometry" />
        </mxCell>
        <mxCell id="divider1" value="" style="endArrow=none;html=1;strokeColor=#000000;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="70" y="120" as="sourcePoint" />
            <mxPoint x="780" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="app-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="150" width="710" height="470" as="geometry" />
        </mxCell>
        <mxCell id="app-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;1. APLICAÇÃO - TRANSAÇÃO ÚNICA&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="225" y="165" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="service-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="120" y="220" width="610" height="100" as="geometry" />
        </mxCell>
        <mxCell id="service-title" value="&lt;b&gt;SERVIÇO DE APLICAÇÃO&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;OrderService&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="325" y="235" width="200" height="35" as="geometry" />
        </mxCell>
        <mxCell id="service-code" value="&lt;font face=&quot;Courier New&quot;&gt;createOrder(orderData) {&lt;br&gt;&amp;nbsp; // Lógica de negócio&lt;br&gt;&amp;nbsp; database.beginTransaction()&lt;br&gt;}&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="140" y="270" width="570" height="35" as="geometry" />
        </mxCell>
        <mxCell id="arrow-service-db" value="&lt;b&gt;BEGIN TRANSACTION&lt;/b&gt;" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;fontSize=11;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="service-box" target="database-box" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="database-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="120" y="370" width="610" height="220" as="geometry" />
        </mxCell>
        <mxCell id="database-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;BANCO DE DADOS - TRANSAÇÃO ATÔMICA&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="225" y="385" width="400" height="25" as="geometry" />
        </mxCell>
        <mxCell id="orders-table-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="160" y="430" width="250" height="135" as="geometry" />
        </mxCell>
        <mxCell id="orders-table-title" value="&lt;b&gt;TABELA: orders&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="185" y="440" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="orders-operation" value="&lt;b&gt;INSERT&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="235" y="465" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="orders-data" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="495" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="orders-content" value="&lt;font face=&quot;Courier New&quot;&gt;id: 12345&lt;br&gt;customer_id: 789&lt;br&gt;total: 150.00&lt;br&gt;status: CREATED&lt;br&gt;created_at: 2024-11-16 10:30:00&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="190" y="495" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="outbox-table-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="450" y="430" width="250" height="135" as="geometry" />
        </mxCell>
        <mxCell id="outbox-table-title" value="&lt;b&gt;TABELA: outbox_events&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="475" y="440" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="outbox-operation" value="&lt;b&gt;INSERT&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="525" y="465" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="outbox-data" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="495" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="outbox-content" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 8px;&quot;&gt;id: uuid-abc-123&lt;br&gt;event_type: ORDER_CREATED&lt;br&gt;payload: {order_id: 12345...}&lt;br&gt;published: false&lt;br&gt;created_at: 2024-11-16 10:30:00&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="480" y="495" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="tx-indicator" value="&lt;b&gt;COMMIT TRANSACTION&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;Ambas operações são confirmadas atomicamente&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=2;fontColor=#ffffff;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="160" y="575" width="540" height="40" as="geometry" />
        </mxCell>
        <mxCell id="divider2" value="" style="endArrow=none;html=1;strokeColor=#000000;strokeWidth=3;dashed=1;dashPattern=8 8;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="70" y="660" as="sourcePoint" />
            <mxPoint x="780" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="separator-text" value="&lt;b&gt;SEPARAÇÃO: LÓGICA TRANSACIONAL vs PUBLICAÇÃO KAFKA&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="175" y="665" width="500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="publisher-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="720" width="710" height="350" as="geometry" />
        </mxCell>
        <mxCell id="publisher-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;2. OUTBOX PUBLISHER - PROCESSO INDEPENDENTE&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="175" y="735" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="polling-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="120" y="790" width="610" height="100" as="geometry" />
        </mxCell>
        <mxCell id="polling-title" value="&lt;b&gt;OUTBOX PUBLISHER SERVICE&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;Polling ou Change Data Capture (CDC)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="275" y="805" width="300" height="35" as="geometry" />
        </mxCell>
        <mxCell id="polling-steps" value="&lt;font face=&quot;Courier New&quot;&gt;1. SELECT * FROM outbox_events WHERE published = false&lt;br&gt;2. FOR EACH event: publishToKafka(event)&lt;br&gt;3. UPDATE outbox_events SET published = true&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="140" y="845" width="570" height="35" as="geometry" />
        </mxCell>
        <mxCell id="arrow-polling-outbox" value="&lt;b&gt;1. POLLING&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;Lê eventos não publicados&lt;/font&gt;" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=2;fontSize=10;entryX=0.135;entryY=-0.005;entryDx=0;entryDy=0;startArrow=none;startFill=0;entryPerimeter=0;" parent="1" target="outbox-read-box" edge="1">
          <mxGeometry x="-0.1911" relative="1" as="geometry">
            <mxPoint x="170" y="890" as="sourcePoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="outbox-read-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="142" y="940" width="210" height="110" as="geometry" />
        </mxCell>
        <mxCell id="outbox-read-title" value="&lt;b&gt;outbox_events&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;(eventos pendentes)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="167" y="950" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="outbox-event1" value="&lt;font face=&quot;Courier New&quot;&gt;ORDER_CREATED&lt;br&gt;published: false ❌&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=8;align=center;" parent="1" vertex="1">
          <mxGeometry x="157" y="985" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="outbox-event2" value="&lt;font face=&quot;Courier New&quot;&gt;PAYMENT_PROCESSED&lt;br&gt;published: false ❌&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=8;align=center;" parent="1" vertex="1">
          <mxGeometry x="157" y="1015" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="arrow-outbox-kafka" value="&lt;b&gt;2. PUBLISH&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;Publica no Kafka&lt;/font&gt;" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;fontSize=10;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="outbox-read-box" target="kafka-publish-box" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kafka-publish-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="464" y="939" width="250" height="110" as="geometry" />
        </mxCell>
        <mxCell id="kafka-pub-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;KAFKA TOPIC&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;&quot;orders.events&quot;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#ffffff;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="489" y="954" width="200" height="35" as="geometry" />
        </mxCell>
        <mxCell id="kafka-msg1" value="ORDER_CREATED ✓" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=9;align=center;" parent="1" vertex="1">
          <mxGeometry x="484" y="999" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="kafka-msg2" value="PAYMENT_PROCESSED ✓" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=9;align=center;" parent="1" vertex="1">
          <mxGeometry x="484" y="1024" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="arrow-update-outbox" value="&lt;b&gt;3. UPDATE&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;Marca como publicado&lt;/font&gt;" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=2;fontSize=10;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.294;entryY=1.01;entryDx=0;entryDy=0;startArrow=none;startFill=0;entryPerimeter=0;" parent="1" source="outbox-read-box" target="polling-box" edge="1">
          <mxGeometry x="-0.1837" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="features-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="1110" width="710" height="200" as="geometry" />
        </mxCell>
        <mxCell id="features-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CARACTERÍSTICAS DO PADRÃO OUTBOX&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="175" y="1120" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="feature-col1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="1165" width="320" height="120" as="geometry" />
        </mxCell>
        <mxCell id="feature1-title" value="&lt;b&gt;CONSISTÊNCIA GARANTIDA&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="120" y="1175" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="feature1-text" value="✓ Transação ACID garante ambas escritas&lt;br&gt;✓ Sem dual-write problem&lt;br&gt;✓ Dados e eventos sempre sincronizados&lt;br&gt;✓ Rollback automático em caso de falha" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="125" y="1200" width="270" height="75" as="geometry" />
        </mxCell>
        <mxCell id="feature-col2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="440" y="1165" width="320" height="120" as="geometry" />
        </mxCell>
        <mxCell id="feature2-title" value="&lt;b&gt;DESACOPLAMENTO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="460" y="1175" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="feature2-text" value="✓ Aplicação não depende do Kafka&lt;br&gt;✓ Publisher independente e escalável&lt;br&gt;✓ Retry automático de publicação&lt;br&gt;✓ Kafka offline não afeta transações" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="465" y="1200" width="270" height="75" as="geometry" />
        </mxCell>
        <mxCell id="guarantees-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="1350" width="710" height="180" as="geometry" />
        </mxCell>
        <mxCell id="guarantees-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;GARANTIAS DE ENTREGA&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="275" y="1360" width="300" height="25" as="geometry" />
        </mxCell>
        <mxCell id="scenario1-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="1400" width="320" height="105" as="geometry" />
        </mxCell>
        <mxCell id="scenario1-title" value="&lt;b&gt;Cenário 1: Falha Antes do Commit&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="120" y="1410" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="scenario1-text" value="❌ Transação sofre rollback&lt;br&gt;❌ Nenhum dado é salvo&lt;br&gt;❌ Nenhum evento na outbox&lt;br&gt;&lt;b&gt;✓ RESULTADO: Consistência mantida&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="125" y="1435" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="scenario2-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="440" y="1400" width="320" height="105" as="geometry" />
        </mxCell>
        <mxCell id="scenario2-title" value="&lt;b&gt;Cenário 2: Falha na Publicação&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="460" y="1410" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="scenario2-text" value="✓ Dados salvos no banco&lt;br&gt;✓ Evento na outbox (published=false)&lt;br&gt;✓ Publisher tenta novamente depois&lt;br&gt;&lt;b&gt;✓ RESULTADO: At-least-once delivery&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="465" y="1435" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="impl-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="70" y="1570" width="710" height="150" as="geometry" />
        </mxCell>
        <mxCell id="impl-title" value="&lt;b&gt;TECNOLOGIAS PARA IMPLEMENTAÇÃO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="250" y="1580" width="350" height="25" as="geometry" />
        </mxCell>
        <mxCell id="polling-impl-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="1620" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="polling-impl-title" value="&lt;b&gt;1. POLLING (Simples)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="120" y="1630" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="polling-impl-text" value="• Job scheduled (cron, Quartz)&lt;br&gt;• SELECT com intervalo regular&lt;br&gt;• Fácil implementação&lt;br&gt;• Latência: segundos" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="125" y="1643" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cdc-impl-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="440" y="1620" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cdc-impl-title" value="&lt;b&gt;2. CDC - Change Data Capture&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="460" y="1630" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="cdc-impl-text" value="• Debezium + Kafka Connect&lt;br&gt;• Lê transaction log do banco&lt;br&gt;• Tempo real (millisegundos)&lt;br&gt;• Produção-ready" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="465" y="1642" width="270" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
