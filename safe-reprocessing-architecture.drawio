<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36" version="29.0.3">
  <diagram name="Safe Reprocessing Architecture" id="safe-reprocessing-diagram">
    <mxGraphModel dx="1113" dy="826" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="2200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="&lt;b&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;Arquitetura de Reprocessamento Seguro&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="100" y="30" width="650" height="40" as="geometry" />
        </mxCell>
        <mxCell id="subtitle" value="Processamento HistÃ³rico Isolado sem Impacto no Fluxo Real-Time" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="175" y="70" width="500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="divider1" value="" style="endArrow=none;html=1;strokeColor=#000000;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="70" y="120" as="sourcePoint" />
            <mxPoint x="780" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="realtime-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="150" width="710" height="300" as="geometry" />
        </mxCell>
        <mxCell id="realtime-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;FLUXO PRINCIPAL: TEMPO REAL (PRODUÃ‡ÃƒO)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="200" y="165" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="realtime-label" value="âœ… &lt;b&gt;ATIVO&lt;/b&gt; - Processamento contÃ­nuo de eventos atuais" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=2;fontColor=#006400;" parent="1" vertex="1">
          <mxGeometry x="250" y="195" width="350" height="20" as="geometry" />
        </mxCell>
        <mxCell id="producer-realtime" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="235" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="producer-realtime-label" value="&lt;b&gt;PRODUCERS&lt;/b&gt;&lt;br&gt;&lt;font&gt;Eventos atuais&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="115" y="245" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="arrow-prod-topic-rt" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="producer-realtime" target="topic-main" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="topic-main" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="300" y="235" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="topic-main-label" value="&lt;b&gt;orders.main&lt;/b&gt;&lt;br&gt;&lt;font&gt;TÃ³pico principal&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="315" y="245" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="arrow-topic-consumer-rt" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="topic-main" target="consumer-realtime" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="consumer-realtime" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="520" y="235" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="consumer-realtime-label" value="&lt;b&gt;CONSUMER GROUP: prod&lt;/b&gt;&lt;br&gt;&lt;font&gt;Processa pedidos em tempo real&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="535" y="245" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="metrics-realtime" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="325" width="650" height="105" as="geometry" />
        </mxCell>
        <mxCell id="metrics-rt-title" value="&lt;b&gt;CaracterÃ­sticas do Fluxo Real-Time:&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="115" y="335" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="metrics-rt-content" value="â€¢ &lt;b&gt;LatÃªncia CrÃ­tica:&lt;/b&gt; Processamento em milissegundos para atender SLA&lt;br&gt;â€¢ &lt;b&gt;Alta Disponibilidade:&lt;/b&gt; 99.99% uptime, sem interrupÃ§Ãµes&lt;br&gt;â€¢ &lt;b&gt;Prioridade MÃ¡xima:&lt;/b&gt; Recursos dedicados e isolados&lt;br&gt;â€¢ &lt;b&gt;Monitoramento Ativo:&lt;/b&gt; Alertas em tempo real, on-call 24/7" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="120" y="355" width="610" height="60" as="geometry" />
        </mxCell>
        <mxCell id="separator" value="" style="endArrow=none;html=1;strokeColor=#000000;strokeWidth=4;dashed=1;dashPattern=8 8;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="70" y="490" as="sourcePoint" />
            <mxPoint x="780" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="separator-label" value="&lt;b&gt;ISOLAMENTO COMPLETO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#ffffff;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="325" y="475" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="reprocess-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="530" width="710" height="670" as="geometry" />
        </mxCell>
        <mxCell id="reprocess-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;FLUXO DE REPROCESSAMENTO: AMBIENTE ISOLADO&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="175" y="545" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="reprocess-label" value="ðŸ”„ &lt;b&gt;BATCH MODE&lt;/b&gt; - Processamento histÃ³rico sem impacto em produÃ§Ã£o" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=2;fontColor=#8B0000;" parent="1" vertex="1">
          <mxGeometry x="225" y="575" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step1-reprocess" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="620" width="280" height="100" as="geometry" />
        </mxCell>
        <mxCell id="step1-title" value="&lt;b&gt;PASSO 1: FONTE DE DADOS HISTÃ“RICOS&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="115" y="630" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step1-content" value="ðŸ“¦ &lt;b&gt;TÃ³pico: orders.reprocessing&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Dados histÃ³ricos copiados do tÃ³pico principal&lt;br&gt;â€¢ Range: Janeiro a MarÃ§o 2024&lt;br&gt;â€¢ Volume: 5M de eventos" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="120" y="649" width="240" height="55" as="geometry" />
        </mxCell>
        <mxCell id="arrow-step1-2" value="&lt;b&gt;consume()&lt;/b&gt;" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" parent="1" source="step1-reprocess" target="step2-reprocess" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step2-reprocess" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="486" y="620" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="step2-title" value="&lt;b&gt;PASSO 2: PROCESSAMENTO ISOLADO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="491" y="630" width="270" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step2-content" value="ðŸ”§ &lt;b&gt;Consumer Group: reprocessing&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Infraestrutura separada (pods/VMs dedicados)&lt;br&gt;â€¢ Recursos limitados (throttling configurado)&lt;br&gt;â€¢ Processamento em paralelo controlado" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="491" y="649" width="270" height="55" as="geometry" />
        </mxCell>
        <mxCell id="arrow-step2-3" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.813;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="step2-reprocess" target="step3-reprocess" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="621" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step3-reprocess" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="760" width="640" height="140" as="geometry" />
        </mxCell>
        <mxCell id="step3-title" value="&lt;b&gt;PASSO 3: VALIDAÃ‡ÃƒO E TRANSFORMAÃ‡ÃƒO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="250" y="775" width="350" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-box1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="120" y="815" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="step3-box1-text" value="&lt;b&gt;ValidaÃ§Ã£o de Dados&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Schema validation&lt;br&gt;â€¢ Business rules check&lt;br&gt;â€¢ Data quality scoring" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="130" y="820" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="step3-box2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="330" y="815" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="step3-box2-text" value="&lt;b&gt;CorreÃ§Ã£o de Bugs&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Aplicar nova lÃ³gica&lt;br&gt;â€¢ CorreÃ§Ã£o de cÃ¡lculos&lt;br&gt;â€¢ MigraÃ§Ã£o de formato" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="340" y="820" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="step3-box3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="815" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="step3-box3-text" value="&lt;b&gt;Enriquecimento&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Lookup de dados externos&lt;br&gt;â€¢ CÃ¡lculo de mÃ©tricas&lt;br&gt;â€¢ AgregaÃ§Ã£o de informaÃ§Ãµes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="550" y="820" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arrow-step3-4" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="step4-reprocess" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="420" y="900" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step4-reprocess" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="933" width="640" height="110" as="geometry" />
        </mxCell>
        <mxCell id="step4-title" value="&lt;b&gt;PASSO 4: ÃREA DE STAGING (RESULTADOS INTERMEDIÃRIOS)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="175" y="938" width="500" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step4-content" value="ðŸ’¾ &lt;b&gt;Armazenamento TemporÃ¡rio: orders.staging (Database separado / S3 / Data Lake)&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Resultados validados antes da integraÃ§Ã£o final&lt;br&gt;â€¢ Permite revisÃ£o manual e auditoria completa&lt;br&gt;â€¢ Rollback fÃ¡cil em caso de problemas detectados&lt;br&gt;â€¢ ComparaÃ§Ã£o side-by-side: histÃ³rico vs. reprocessado" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="120" y="953" width="600" height="55" as="geometry" />
        </mxCell>
        <mxCell id="arrow-step4-5" value="&lt;b&gt;ApÃ³s validaÃ§Ã£o manual&lt;/b&gt;" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=3;exitX=0.523;exitY=1.012;exitDx=0;exitDy=0;entryX=0.486;entryY=0;entryDx=0;entryDy=0;fontSize=10;entryPerimeter=0;exitPerimeter=0;" parent="1" source="step4-reprocess" target="step5-title" edge="1">
          <mxGeometry x="-0.2478" relative="1" as="geometry">
            <mxPoint x="436" y="1050" as="sourcePoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step5-reprocess" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="116" y="1080" width="610" height="100" as="geometry" />
        </mxCell>
        <mxCell id="step5-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;PASSO 5: INTEGRAÃ‡ÃƒO CONTROLADA AO SISTEMA PRINCIPAL&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#ffffff;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="191" y="1086" width="500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step5-content" value="ðŸ”€ &lt;b&gt;Merge Strategy:&lt;/b&gt; Upsert com timestamp / version control&lt;br&gt;â€¢ AtualizaÃ§Ã£o incremental em horÃ¡rios de baixo trÃ¡fego (janela de manutenÃ§Ã£o)&lt;br&gt;â€¢ Rate limiting configurado para nÃ£o sobrecarregar banco principal&lt;br&gt;â€¢ Monitoramento de impacto em latÃªncia e throughput do sistema real-time" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="136" y="1107.5" width="600" height="45" as="geometry" />
        </mxCell>
        <mxCell id="isolation-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="1250" width="710" height="200" as="geometry" />
        </mxCell>
        <mxCell id="isolation-title" value="&lt;b&gt;GARANTIAS DE ISOLAMENTO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="275" y="1265" width="300" height="25" as="geometry" />
        </mxCell>
        <mxCell id="isolation1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="90" y="1305" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="isolation1-text" value="&lt;b&gt;1. Infraestrutura Separada&lt;/b&gt;&lt;br&gt;â€¢ Clusters Kafka dedicados com consumer groups isolados&lt;br&gt;â€¢ Pods/VMs separados (sem compartilhamento de recursos)&lt;br&gt;â€¢ Databases staging completamente independentes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="100" y="1310" width="290" height="50" as="geometry" />
        </mxCell>
        <mxCell id="isolation2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="430" y="1305" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="isolation2-text" value="&lt;b&gt;2. Rate Limiting e Throttling&lt;/b&gt;&lt;br&gt;â€¢ Consumo controlado: mÃ¡x 1000 msg/s (vs 50000 msg/s prod)&lt;br&gt;â€¢ CPU/Memory caps: 20% dos recursos totais&lt;br&gt;â€¢ Network bandwidth limitado para evitar contenÃ§Ã£o" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="440" y="1310" width="300" height="50" as="geometry" />
        </mxCell>
        <mxCell id="isolation3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="90" y="1380" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="isolation3-text" value="&lt;b&gt;3. PriorizaÃ§Ã£o de Recursos&lt;/b&gt;&lt;br&gt;â€¢ Fluxo real-time tem prioridade P0 (crÃ­tico)&lt;br&gt;â€¢ Reprocessamento tem prioridade P3 (best-effort)&lt;br&gt;â€¢ Circuit breakers para interromper batch se prod sofrer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="100" y="1385" width="290" height="50" as="geometry" />
        </mxCell>
        <mxCell id="isolation4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="430" y="1380" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="isolation4-text" value="&lt;b&gt;4. Janelas de ExecuÃ§Ã£o&lt;/b&gt;&lt;br&gt;â€¢ Reprocessamento agendado fora de horÃ¡rios de pico&lt;br&gt;â€¢ Pausas automÃ¡ticas durante incidentes em produÃ§Ã£o&lt;br&gt;â€¢ Rollback imediato se mÃ©tricas de prod degradarem" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="440" y="1385" width="300" height="50" as="geometry" />
        </mxCell>
        <mxCell id="usecases-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="1500" width="710" height="200" as="geometry" />
        </mxCell>
        <mxCell id="usecases-title" value="&lt;b&gt;CASOS DE USO PARA REPROCESSAMENTO SEGURO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="200" y="1515" width="450" height="25" as="geometry" />
        </mxCell>
        <mxCell id="usecase1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="1555" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="usecase1-text" value="&lt;b&gt;ðŸ› CorreÃ§Ã£o de Bugs HistÃ³ricos&lt;/b&gt;&lt;br&gt;Aplicar fix de lÃ³gica de negÃ³cio em dados processados incorretamente no passado sem afetar processamento atual" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="100" y="1562" width="290" height="45" as="geometry" />
        </mxCell>
        <mxCell id="usecase2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="430" y="1555" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="usecase2-text" value="&lt;b&gt;ðŸ“Š Backfill de Analytics&lt;/b&gt;&lt;br&gt;Recalcular mÃ©tricas histÃ³ricas com novas regras de agregaÃ§Ã£o sem impactar dashboards em tempo real" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="440" y="1562" width="300" height="45" as="geometry" />
        </mxCell>
        <mxCell id="usecase3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="1630" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="usecase3-text" value="&lt;b&gt;ðŸ”„ MigraÃ§Ã£o de Schema&lt;/b&gt;&lt;br&gt;Converter formatos antigos para novos schemas compatÃ­veis, testando em staging antes de aplicar em produÃ§Ã£o" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="100" y="1637" width="290" height="45" as="geometry" />
        </mxCell>
        <mxCell id="usecase4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="430" y="1630" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="usecase4-text" value="&lt;b&gt;ðŸ§ª Testes de Performance&lt;/b&gt;&lt;br&gt;Validar novas versÃµes de consumidores com dados reais histÃ³ricos antes de deploy em produÃ§Ã£o" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="440" y="1637" width="300" height="45" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=3;" parent="1" vertex="1">
          <mxGeometry x="70" y="1750" width="710" height="160" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-title" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;MONITORAMENTO E OBSERVABILIDADE&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#ffffff;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="225" y="1765" width="400" height="25" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-metrics" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="1805" width="640" height="90" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-col1" value="&lt;b&gt;MÃ©tricas Fluxo Real-Time:&lt;/b&gt;&lt;br&gt;â€¢ LatÃªncia p99 &amp;lt; 100ms&lt;br&gt;â€¢ Throughput: 50K msg/s&lt;br&gt;â€¢ CPU: &amp;lt; 60%&lt;br&gt;â€¢ Lag: &amp;lt; 1000 msgs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="115" y="1815" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-col2" value="&lt;b&gt;MÃ©tricas Reprocessamento:&lt;/b&gt;&lt;br&gt;â€¢ Progress: 2.3M / 5M (46%)&lt;br&gt;â€¢ Rate: 1K msg/s (throttled)&lt;br&gt;â€¢ CPU: 15% (limited)&lt;br&gt;â€¢ Errors: 0.02%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="320" y="1815" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-col3" value="&lt;b&gt;Alertas Configurados:&lt;/b&gt;&lt;br&gt;â€¢ Prod latency &amp;gt; 200ms â†’ PAUSE&lt;br&gt;â€¢ Prod CPU &amp;gt; 80% â†’ PAUSE&lt;br&gt;â€¢ Reprocess errors &amp;gt; 1% â†’ ALERT&lt;br&gt;â€¢ Staging disk &amp;gt; 90% â†’ STOP" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="525" y="1815" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="footer" value="âœ… &lt;b&gt;PRINCÃPIO CHAVE:&lt;/b&gt; O fluxo de reprocessamento NUNCA deve impactar a disponibilidade, latÃªncia ou throughput do sistema em tempo real" style="text;html=1;strokeColor=#000000;fillColor=#e0e0e0;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontStyle=2;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="1950" width="650" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
