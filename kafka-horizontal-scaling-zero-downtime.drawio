<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3">
  <diagram id="kafka-horizontal-scaling" name="Kafka Horizontal Scaling">
    <mxGraphModel dx="1181" dy="686" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="Escalabilidade Horizontal Kafka&#xa;Adição de Brokers sem Downtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="150" y="20" width="550" height="50" as="geometry" />
        </mxCell>
        <mxCell id="state1-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#000000;strokeWidth=3" parent="1" vertex="1">
          <mxGeometry x="40" y="100" width="770" height="280" as="geometry" />
        </mxCell>
        <mxCell id="state1-label" value="ESTADO INICIAL: Cluster com 3 Brokers" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="250" y="110" width="350" height="25" as="geometry" />
        </mxCell>
        <mxCell id="state1-broker1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="80" y="155" width="200" height="195" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-label" value="Broker 1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="130" y="165" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-cpu" value="CPU: 78%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
          <mxGeometry x="95" y="190" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-mem" value="Memory: 85%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
          <mxGeometry x="95" y="205" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-partitions" value="Partições:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="95" y="230" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-p1" value="• Topic-A: P0(L), P3(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="95" y="248" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-p2" value="• Topic-B: P1(L), P4(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="95" y="262" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-p3" value="• Topic-C: P2(L), P5(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="95" y="276" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-throughput" value="Throughput: 42 MB/s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="95" y="300" width="170" height="25" as="geometry" />
        </mxCell>
        <mxCell id="state1-b1-total" value="Total: 6 partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="95" y="328" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-broker2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="325" y="155" width="200" height="195" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-label" value="Broker 2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="375" y="165" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-cpu" value="CPU: 82%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
          <mxGeometry x="340" y="190" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-mem" value="Memory: 88%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
          <mxGeometry x="340" y="205" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-partitions" value="Partições:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="340" y="230" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-p1" value="• Topic-A: P1(L), P4(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="340" y="248" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-p2" value="• Topic-B: P0(L), P3(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="340" y="262" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-p3" value="• Topic-C: P1(L), P4(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="340" y="276" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-throughput" value="Throughput: 46 MB/s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="340" y="300" width="170" height="25" as="geometry" />
        </mxCell>
        <mxCell id="state1-b2-total" value="Total: 6 partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="340" y="328" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-broker3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="570" y="155" width="200" height="195" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-label" value="Broker 3" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="620" y="165" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-cpu" value="CPU: 80%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
          <mxGeometry x="585" y="190" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-mem" value="Memory: 86%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
          <mxGeometry x="585" y="205" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-partitions" value="Partições:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="585" y="230" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-p1" value="• Topic-A: P2(L), P5(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="585" y="248" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-p2" value="• Topic-B: P2(L), P5(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="585" y="262" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-p3" value="• Topic-C: P0(L), P3(F)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="585" y="276" width="170" height="12" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-throughput" value="Throughput: 44 MB/s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="585" y="300" width="170" height="25" as="geometry" />
        </mxCell>
        <mxCell id="state1-b3-total" value="Total: 6 partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="585" y="328" width="170" height="15" as="geometry" />
        </mxCell>
        <mxCell id="problem-box" value="⚠ PROBLEMA: Cluster saturado (CPU/Memory &gt; 80%)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=2;fontSize=10;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="240" y="355" width="370" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step1-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#000000;strokeWidth=3" parent="1" vertex="1">
          <mxGeometry x="40" y="420" width="770" height="240" as="geometry" />
        </mxCell>
        <mxCell id="step1-label" value="PASSO 1: Provisionar Novo Broker" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="260" y="430" width="330" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step1-number" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;strokeColor=#000000;strokeWidth=2;fontSize=16;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="60" y="430" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="step1-existing-label" value="Brokers Existentes (Ativos)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="80" y="470" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step1-b1" value="Broker 1&#xa;Online" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="80" y="495" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="step1-b2" value="Broker 2&#xa;Online" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="180" y="495" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="step1-b3" value="Broker 3&#xa;Online" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="280" y="495" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="step1-arrow" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=2;endFill=1" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="520" as="sourcePoint" />
            <mxPoint x="430" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step1-new-broker" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=3;dashed=1;dashPattern=8 8" parent="1" vertex="1">
          <mxGeometry x="450" y="470" width="300" height="165" as="geometry" />
        </mxCell>
        <mxCell id="step1-new-label" value="Broker 4 (NOVO)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="550" y="480" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step1-config" value="Configurações:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="465" y="498" width="100" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step1-config-items" value="• broker.id=4&#xa;• listeners=PLAINTEXT://:9092&#xa;• log.dirs=/kafka/data&#xa;• zookeeper.connect=zk:2181&#xa;• num.partitions=3" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="465" y="517" width="270" height="55" as="geometry" />
        </mxCell>
        <mxCell id="step1-command" value="Comando de inicialização:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="465" y="580" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step1-cmd" value="kafka-server-start.sh server.properties" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=9;fontFamily=Courier New" parent="1" vertex="1">
          <mxGeometry x="465" y="598" width="270" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step1-status" value="✓ Broker registrado no ZooKeeper" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="80" y="560" width="280" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step1-status2" value="✓ Cluster continua operando normalmente" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="80" y="575" width="280" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step1-status3" value="✓ Zero downtime para produtores/consumidores" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="80" y="590" width="280" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step2-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#000000;strokeWidth=3" parent="1" vertex="1">
          <mxGeometry x="40" y="700" width="770" height="340" as="geometry" />
        </mxCell>
        <mxCell id="step2-label" value="PASSO 2: Redistribuir Partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="270" y="710" width="310" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-number" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;strokeColor=#000000;strokeWidth=2;fontSize=16;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="60" y="710" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="step2-process-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="80" y="760" width="690" height="110" as="geometry" />
        </mxCell>
        <mxCell id="step2-process-label" value="Processo de Reassignment" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="340" y="770" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step2-step1" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;strokeColor=#000000;strokeWidth=1;fontSize=10;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="100" y="800" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-step1-text" value="Gerar plano de redistribuição&#xa;kafka-reassign-partitions.sh --generate" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="135" y="800" width="200" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-step2" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;strokeColor=#000000;strokeWidth=1;fontSize=10;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="360" y="800" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-step2-text" value="Executar reassignment&#xa;kafka-reassign-partitions.sh --execute" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="395" y="800" width="190" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-step3" value="C" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;strokeColor=#000000;strokeWidth=1;fontSize=10;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="100" y="835" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-step3-text" value="Monitorar progresso (replicação)&#xa;kafka-reassign-partitions.sh --verify" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="135" y="835" width="200" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-step4" value="D" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;strokeColor=#000000;strokeWidth=1;fontSize=10;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="360" y="835" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-step4-text" value="Aguardar conclusão&#xa;(partições sincronizadas)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="395" y="835" width="150" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-throttle" value="⚙ Throttle de replicação: 50 MB/s&#xa;(evita impacto em produção)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=9;" parent="1" vertex="1">
          <mxGeometry x="600" y="800" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="step2-visualization" value="Visualização da Redistribuição:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="300" y="885" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step2-before" value="ANTES" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="140" y="910" width="80" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step2-before-b1" value="B1: 6 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="100" y="930" width="60" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-before-b2" value="B2: 6 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="170" y="930" width="60" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-before-b3" value="B3: 6 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="240" y="930" width="60" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-before-b4" value="B4: 0 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;dashed=1;dashPattern=4 4" parent="1" vertex="1">
          <mxGeometry x="310" y="930" width="60" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-arrow-middle" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=2;endFill=1" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="942" as="sourcePoint" />
            <mxPoint x="440" y="942" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step2-after" value="DEPOIS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="570" y="910" width="80" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step2-after-b1" value="B1: 4-5 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="460" y="930" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-after-b2" value="B2: 4-5 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="540" y="930" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-after-b3" value="B3: 4-5 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="620" y="930" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-after-b4" value="B4: 4-5 part" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="700" y="930" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step2-benefit" value="✓ Carga distribuída uniformemente entre 4 brokers" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="260" y="970" width="330" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step2-duration" value="Duração típica: 5-30 minutos (depende do volume de dados)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=11;dashed=1;dashPattern=4 4" parent="1" vertex="1">
          <mxGeometry x="80" y="1000" width="690" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#000000;strokeWidth=3" parent="1" vertex="1">
          <mxGeometry x="40" y="1080" width="770" height="300" as="geometry" />
        </mxCell>
        <mxCell id="step3-label" value="ESTADO FINAL: Cluster com 4 Brokers" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="260" y="1090" width="330" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-number" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;strokeColor=#000000;strokeWidth=2;fontSize=16;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="60" y="1090" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="step3-broker1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="80" y="1140" width="160" height="150" as="geometry" />
        </mxCell>
        <mxCell id="step3-b1-label" value="Broker 1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="110" y="1150" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step3-b1-cpu" value="CPU: 52%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="95" y="1175" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b1-mem" value="Memory: 58%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="95" y="1190" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b1-part" value="4-5 partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="95" y="1215" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b1-throughput" value="Throughput: 28 MB/s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="95" y="1240" width="130" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-broker2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="260" y="1140" width="160" height="150" as="geometry" />
        </mxCell>
        <mxCell id="step3-b2-label" value="Broker 2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="290" y="1150" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step3-b2-cpu" value="CPU: 55%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="275" y="1175" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b2-mem" value="Memory: 60%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="275" y="1190" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b2-part" value="4-5 partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="275" y="1215" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b2-throughput" value="Throughput: 30 MB/s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="275" y="1240" width="130" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-broker3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="440" y="1140" width="160" height="150" as="geometry" />
        </mxCell>
        <mxCell id="step3-b3-label" value="Broker 3" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="470" y="1150" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step3-b3-cpu" value="CPU: 53%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="455" y="1175" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b3-mem" value="Memory: 59%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="455" y="1190" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b3-part" value="4-5 partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="455" y="1215" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b3-throughput" value="Throughput: 29 MB/s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="455" y="1240" width="130" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-broker4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="620" y="1140" width="160" height="150" as="geometry" />
        </mxCell>
        <mxCell id="step3-b4-label" value="Broker 4 ⭐" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="650" y="1150" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step3-b4-cpu" value="CPU: 50%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="635" y="1175" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b4-mem" value="Memory: 56%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000" parent="1" vertex="1">
          <mxGeometry x="635" y="1190" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b4-part" value="4-5 partições" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="635" y="1215" width="130" height="15" as="geometry" />
        </mxCell>
        <mxCell id="step3-b4-throughput" value="Throughput: 27 MB/s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="635" y="1240" width="130" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-success" value="✓ SUCESSO: Recursos balanceados, capacidade aumentada em 33%" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;strokeWidth=2;fontSize=12;fontStyle=1;fontColor=#ffffff" parent="1" vertex="1">
          <mxGeometry x="200" y="1315" width="450" height="25" as="geometry" />
        </mxCell>
        <mxCell id="step3-stats" value="Throughput total: 132 MB/s | CPU médio: 52.5% | Zero mensagens perdidas" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="200" y="1350" width="450" height="20" as="geometry" />
        </mxCell>
        <mxCell id="benefits-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="40" y="1410" width="770" height="180" as="geometry" />
        </mxCell>
        <mxCell id="benefits-label" value="BENEFÍCIOS DA ESCALABILIDADE HORIZONTAL" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="240" y="1420" width="370" height="20" as="geometry" />
        </mxCell>
        <mxCell id="benefit1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1" parent="1" vertex="1">
          <mxGeometry x="70" y="1455" width="170" height="115" as="geometry" />
        </mxCell>
        <mxCell id="benefit1-title" value="Zero Downtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="85" y="1465" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="benefit1-items" value="✓ Cluster continua online&lt;br&gt;✓ Produtores/consumidores&amp;nbsp;não afetados&lt;br&gt;✓ SLA mantido&lt;br&gt;✓ Transparente p/ clientes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="80" y="1490" width="155" height="70" as="geometry" />
        </mxCell>
        <mxCell id="benefit2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1" parent="1" vertex="1">
          <mxGeometry x="260" y="1455" width="160" height="115" as="geometry" />
        </mxCell>
        <mxCell id="benefit2-title" value="Capacidade Elástica" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="275" y="1465" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="benefit2-items" value="✓ Adicionar brokers sob demanda&lt;br&gt;✓ Aumentar throughput&lt;br&gt;✓ Reduzir latência&lt;br&gt;✓ Crescimento gradual" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="275" y="1490" width="145" height="70" as="geometry" />
        </mxCell>
        <mxCell id="benefit3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1" parent="1" vertex="1">
          <mxGeometry x="440" y="1455" width="160" height="115" as="geometry" />
        </mxCell>
        <mxCell id="benefit3-title" value="Balanceamento" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="455" y="1465" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="benefit3-items" value="✓ Distribuição uniforme&#xa;✓ Otimizar recursos&#xa;✓ Evitar hot spots&#xa;✓ Melhor utilização" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="455" y="1490" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="benefit4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=1" parent="1" vertex="1">
          <mxGeometry x="620" y="1455" width="160" height="115" as="geometry" />
        </mxCell>
        <mxCell id="benefit4-title" value="Tolerância a Falhas" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="635" y="1465" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="benefit4-items" value="✓ Mais réplicas&#xa;✓ Redundância aumentada&#xa;✓ Maior disponibilidade&#xa;✓ Resiliência aprimorada" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="635" y="1490" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="practices-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#000000;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="40" y="1620" width="770" height="100" as="geometry" />
        </mxCell>
        <mxCell id="practices-label" value="MELHORES PRÁTICAS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="310" y="1630" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="practice1" value="✓ Adicionar brokers durante horário de baixo tráfego" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="70" y="1660" width="340" height="15" as="geometry" />
        </mxCell>
        <mxCell id="practice2" value="✓ Configurar throttle de replicação para não sobrecarregar rede" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="70" y="1680" width="340" height="15" as="geometry" />
        </mxCell>
        <mxCell id="practice3" value="✓ Monitorar métricas durante reassignment (ISR, lag, latência)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="440" y="1660" width="350" height="15" as="geometry" />
        </mxCell>
        <mxCell id="practice4" value="✓ Validar replicação completa antes de finalizar (--verify)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="440" y="1680" width="350" height="15" as="geometry" />
        </mxCell>
        <mxCell id="footer-note" value="Processo completo de escalabilidade horizontal sem downtime: provisionar → redistribuir → validar.&#xa;Cluster Kafka permite crescimento orgânico mantendo disponibilidade e performance." style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="120" y="1740" width="610" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
